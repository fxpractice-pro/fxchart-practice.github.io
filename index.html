<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ForexPractice Simulator</title>
    <script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --bg: #0d1117; --panel: #161b22; --border: #30363d; --green: #00ff88; --red: #ff4d4d; --text: #c9d1d9; }
        body, html { margin: 0; padding: 0; width: 100%; height: 100vh; background: var(--bg); color: var(--text); overflow: hidden; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; }

        /* 전체 구조 */
        #container { display: flex; flex-direction: column; height: 100vh; }
        
        /* 헤더 */
        header { height: 60px; background: var(--panel); border-bottom: 1px solid var(--border); display: flex; align-items: center; padding: 0 20px; justify-content: space-between; }
        .logo { color: var(--green); font-weight: bold; font-size: 20px; display: flex; align-items: center; gap: 10px; }
        
        /* 메인 콘텐츠 영역 */
        main { display: flex; flex: 1; overflow: hidden; }

        /* 왼쪽 툴바 */
        .toolbar { width: 50px; background: var(--panel); border-right: 1px solid var(--border); display: flex; flex-direction: column; align-items: center; padding-top: 20px; gap: 25px; }
        .tool-btn { color: #8b949e; font-size: 18px; cursor: pointer; }
        .tool-btn.active { color: var(--green); }

        /* 차트 중앙 섹션 */
        #chart-section { flex: 1; position: relative; background: #000; }
        
        /* 상단 종목/시간대 선택 (Floating) */
        .chart-nav { position: absolute; top: 15px; left: 15px; z-index: 10; display: flex; gap: 10px; }
        .nav-group { background: rgba(22, 27, 34, 0.8); padding: 4px; border-radius: 6px; border: 1px solid var(--border); display: flex; gap: 4px; }
        .nav-btn { background: none; border: none; color: #8b949e; padding: 4px 10px; border-radius: 4px; cursor: pointer; font-size: 12px; }
        .nav-btn.active { background: var(--green); color: #000; font-weight: bold; }

        /* 재생 컨트롤러 (Floating Box - 이미지 재현) */
        #playback-ctrl {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            background: rgba(22, 27, 34, 0.95); border: 1px solid var(--border);
            padding: 20px; border-radius: 12px; z-index: 100; min-width: 320px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
        }
        .ctrl-row { display: flex; justify-content: center; align-items: center; gap: 20px; margin-bottom: 15px; }
        .play-main { background: var(--green); color: #000; width: 45px; height: 45px; border-radius: 50%; border: none; font-size: 20px; cursor: pointer; }
        .speed-row { display: flex; justify-content: center; gap: 8px; }
        .speed-btn { background: #30363d; border: none; color: #fff; padding: 4px 8px; border-radius: 4px; font-size: 11px; cursor: pointer; }
        .speed-btn.active { background: #fff; color: #000; }

        /* 우측 시뮬레이터 사이드바 */
        .sidebar { width: 300px; background: var(--panel); border-left: 1px solid var(--border); display: flex; flex-direction: column; padding: 20px; overflow-y: auto; }
        .sim-card { background: #0d1117; border: 1px solid var(--border); border-radius: 8px; padding: 15px; margin-bottom: 20px; }
        .sim-header { display: flex; justify-content: space-between; font-size: 14px; margin-bottom: 15px; font-weight: bold; }
        .live-tag { color: var(--green); border: 1px solid var(--green); font-size: 10px; padding: 1px 4px; border-radius: 3px; }
        
        .stat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px; }
        .stat-label { font-size: 11px; color: #8b949e; margin-bottom: 5px; }
        .stat-val { font-size: 15px; font-weight: bold; }

        .input-box { width: 100%; background: #161b22; border: 1px solid var(--border); color: #fff; padding: 10px; border-radius: 4px; margin-top: 5px; box-sizing: border-box; }
        
        .trade-btns { display: flex; gap: 10px; margin-top: 20px; }
        .btn-sell { flex: 1; background: var(--red); border: none; padding: 15px; border-radius: 4px; color: #fff; font-weight: bold; cursor: pointer; }
        .btn-buy { flex: 1; background: var(--green); border: none; padding: 15px; border-radius: 4px; color: #000; font-weight: bold; cursor: pointer; }

        /* 광고 영역 */
        .ad-unit { background: #0d1117; border: 1px solid var(--border); border-radius: 8px; padding: 15px; margin-top: auto; }
        .ad-tag { font-size: 9px; color: #444; text-transform: uppercase; margin-bottom: 10px; }
    </style>
</head>
<body>

<div id="container">
    <header>
        <div class="logo"><i class="fas fa-chart-line"></i> ForexPractice</div>
        <div style="background:#0d1117; padding:8px 15px; border-radius:20px; font-size:13px; border:1px solid var(--border);">
            <i class="fas fa-wallet" style="color:var(--green)"></i> $10,000.00
        </div>
    </header>

    <main>
        <div class="toolbar">
            <i class="fas fa-mouse-pointer tool-btn active"></i>
            <i class="fas fa-slash tool-btn"></i>
            <i class="fas fa-square tool-btn"></i>
            <i class="fas fa-eraser tool-btn" title="지우개"></i>
            <i class="fas fa-font tool-btn"></i>
        </div>

        <section id="chart-section">
            <div class="chart-nav">
                <div class="nav-group">
                    <button class="nav-btn" onclick="openSymbol('EUR')">EUR</button>
                    <button class="nav-btn" onclick="openSymbol('USD')">USD</button>
                    <button class="nav-btn" onclick="openSymbol('GBP')">GBP</button>
                    <button class="nav-btn" onclick="openSymbol('BTC')">BTC</button>
                </div>
                <div class="nav-group">
                    <button class="nav-btn active">1h</button>
                    <button class="nav-btn">4h</button>
                    <button class="nav-btn">1d</button>
                </div>
            </div>

            <div id="playback-ctrl">
                <div style="width:30px; height:4px; background:#333; border-radius:2px; margin: 0 auto 15px auto;"></div>
                <div class="ctrl-row">
                    <i class="fas fa-step-backward" style="color:#8b949e; cursor:pointer;"></i>
                    <i class="fas fa-backward" style="color:#8b949e; cursor:pointer;"></i>
                    <button class="play-main" onclick="togglePlay()"><i class="fas fa-play" id="play-icon"></i></button>
                    <i class="fas fa-forward" style="color:#8b949e; cursor:pointer;"></i>
                    <i class="fas fa-step-forward" style="color:#8b949e; cursor:pointer;"></i>
                </div>
                <div class="speed-row">
                    <button class="speed-btn">0.5x</button>
                    <button class="speed-btn active">1x</button>
                    <button class="speed-btn">2x</button>
                    <button class="speed-btn">5x</button>
                    <button class="speed-btn">10x</button>
                </div>
                <div style="font-size:11px; color:#555; text-align:center; margin-top:15px; font-family:monospace;">2023-10-12 08:00 <span style="color:var(--red)">● Live</span></div>
            </div>

            <div id="chart-div" style="width:100%; height:100%;"></div>
        </section>

        <aside class="sidebar">
            <div class="sim-header">Market Simulator <span class="live-tag">LIVE</span></div>
            
            <div class="sim-card">
                <div class="stat-grid">
                    <div><div class="stat-label">Balance</div><div class="stat-val">$10,000.00</div></div>
                    <div><div class="stat-label">Equity</div><div class="stat-val">$10,000.00</div></div>
                </div>
                <div class="stat-grid">
                    <div>
                        <div class="stat-label">Lots</div>
                        <input type="number" class="input-box" value="1.00">
                    </div>
                    <div>
                        <div class="stat-label">Risk %</div>
                        <input type="number" class="input-box" value="1.0">
                    </div>
                </div>
                <div class="trade-btns">
                    <button class="btn-sell">SELL<br><span style="font-size:11px;">1.08450</span></button>
                    <button class="btn-buy">BUY<br><span style="font-size:11px;">1.08454</span></button>
                </div>
            </div>

            <div class="ad-unit">
                <div class="ad-tag">Sponsored</div>
                <div style="display:flex; gap:15px; align-items:center;">
                    <div style="width:40px; height:40px; background:var(--green); border-radius:8px; display:flex; align-items:center; justify-content:center; color:#000;">
                        <i class="fas fa-piggy-bank"></i>
                    </div>
                    <div>
                        <div style="font-size:13px; font-weight:bold;">High Yield Savings</div>
                        <div style="font-size:11px; color:#8b949e;">Earn up to 5.5% APY with us.</div>
                    </div>
                </div>
            </div>
        </aside>
    </main>
</div>

<script>
    let chart, candleSeries, isPlaying = false;

    function initChart() {
        chart = LightweightCharts.createChart(document.getElementById('chart-div'), {
            layout: { background: { color: '#000000' }, textColor: '#c9d1d9' },
            grid: { vertLines: { color: '#161b22' }, horzLines: { color: '#161b22' } },
            timeScale: { borderColor: '#30363d' },
            rightPriceScale: { borderColor: '#30363d' }
        });
        candleSeries = chart.addSeries(LightweightCharts.CandlestickSeries, {
            upColor: '#26a69a', downColor: '#ef5350', borderVisible: false, wickUpColor: '#26a69a', wickDownColor: '#ef5350'
        });
        loadDummyData();
    }

    async function loadDummyData() {
        const res = await fetch(`https://api.binance.com/api/v3/klines?symbol=EURUSDT&interval=1h&limit=500`);
        const data = await res.json();
        const formatted = data.map(d => ({
            time: d[0] / 1000, open: parseFloat(d[1]), high: parseFloat(d[2]), low: parseFloat(d[3]), close: parseFloat(d[4])
        }));
        candleSeries.setData(formatted);
        chart.timeScale().fitContent();
    }

    function togglePlay() {
        isPlaying = !isPlaying;
        document.getElementById('play-icon').className = isPlaying ? 'fas fa-pause' : 'fas fa-play';
    }

    initChart();
</script>
</body>
</html>
